# Редактирование метаданных

> **Русская версия является официальной**

AVA AIGC Toolbox автоматически извлекает и отображает метаданные, созданные ИИ, из ваших изображений, и позволяет вам просматривать, редактировать и управлять этими метаданными. В этом руководстве описано, как работать с метаданными в приложении.

## Что такое метаданные ИИ?

Изображения, созданные с помощью ИИ, часто содержат встроенные метаданные, которые предоставляют информацию о том, как изображение было создано. Эти метаданные обычно включают:

- **Запрос**: Текстовый запрос, использованный для генерации изображения
- **Отрицательный запрос**: Текст, указывающий, что следует исключить из изображения
- **Шаги**: Количество шагов генерации, использованных
- **Сэмплер**: Используемый метод выборки (например, Euler, DDIM, LMS)
- **CFG Scale**: Масштаб свободного от классификатора руководства
- **Seed**: Случайное seed, использованное для генерации
- **Модель**: Название используемой модели ИИ
- **Хэш модели**: Уникальный идентификатор для модели
- **Ширина/Высота**: Генерируемые размеры изображения
- **Clip Skip**: Количество слоев CLIP для пропуска
- **Hypernetwork**: Использованная гиперсеть (если есть)
- **Сила гиперсети**: Сила гиперсети

## Просмотр метаданных

### Панель деталей изображения

Основным способом просмотра метаданных изображения является панель деталей:

#### Шаги для просмотра метаданных:
1. Выберите изображение в основной области контента
2. Панель деталей появится справа от окна
3. Прокрутите вниз, чтобы просмотреть все доступные метаданные
4. Щелкните по разделам, чтобы раскрыть или свернуть их

### Разделы метаданных

Метаданные организованы в несколько разделов:

- **Основная информация**: Имя файла, путь, размер, размеры и атрибуты файла
- **Метаданные ИИ**: Параметры генерации, такие как запрос, отрицательный запрос, шаги и т.д.
- **Свойства изображения**: Пользовательские свойства, такие как рейтинг, статус избранного и теги
- **Технические детали**: Цветовой профиль, битовая глубина и другая техническая информация об изображении

### Полный просмотр метаданных

Для более полного просмотра всех метаданных:

1. Выберите изображение
2. Щелкните правой кнопкой мыши и выберите **Свойства**
3. Перейдите на вкладку **Метаданные**
4. Просмотрите все встроенные и специфические для приложения метаданные
5. Нажмите **Закрыть**, когда закончите

## Редактирование метаданных

### Базовое редактирование метаданных

Вы можете редактировать большинство полей метаданных напрямую в панели деталей:

#### Шаги для редактирования метаданных:
1. Выберите изображение в основной области контента
2. В панели деталей найдите поле метаданных, которое вы хотите отредактировать
3. Щелкните по полю, чтобы сделать его редактируемым
4. Введите новое значение
5. Нажмите `Enter` или щелкните за пределами поля, чтобы сохранить изменения

### Поля метаданных ИИ

Следующие поля метаданных ИИ можно редактировать:

- **Запрос**
- **Отрицательный запрос**
- **Модель**
- **Хэш модели**
- **Сэмплер**
- **Шаги**
- **CFG Scale**
- **Seed**
- **Ширина/Высота**
- **Clip Skip**
- **Hypernetwork**
- **Сила гиперсети**

### Массовое редактирование метаданных

Вы можете редактировать метаданные для нескольких изображений одновременно:

#### Шаги для массового редактирования метаданных:
1. Выберите несколько изображений в основной области контента
2. Щелкните правой кнопкой мыши и выберите **Редактировать метаданные**
3. В диалоговом окне массового редактирования выберите поля метаданных, которые вы хотите отредактировать
4. Введите новые значения для каждого выбранного поля
5. Выберите, как применить изменения:
   - **Установить**: Заменить существующие значения на новое значение
   - **Добавить**: Добавить новое значение к существующим значениям
   - **Добавить в начало**: Вставить новое значение перед существующими значениями
6. Нажмите **Применить**, чтобы сохранить изменения для всех выбранных изображений

### Расширенный редактор метаданных

Для более расширенных вариантов редактирования метаданных:

1. Выберите одно или несколько изображений
2. Перейдите в `Инструменты > Редактор метаданных`
3. В расширенном редакторе вы можете:
   - Просмотреть все поля метаданных в табличном формате
   - Редактировать несколько полей одновременно
   - Копировать метаданные из одного изображения в другое
   - Импортировать/экспортировать метаданные в файлы
   - Пакетно обрабатывать метаданные для нескольких изображений
4. Нажмите **Сохранить**, чтобы применить изменения

## Извлечение метаданных

### Автоматическое извлечение

Приложение автоматически извлекает метаданные при импорте изображений:

#### Шаги для включения автоматического извлечения:
1. Перейдите в `Настройки > Метаданные > Извлечение`
2. Установите флажок **Извлекать метаданные при импорте изображений**
3. Выберите, какие поля метаданных извлекать
4. Нажмите **Сохранить**, чтобы применить изменения

### Ручное извлечение

Вы можете вручную извлечь метаданные из изображений:

#### Шаги для ручного извлечения метаданных:
1. Выберите одно или несколько изображений
2. Щелкните правой кнопкой мыши и выберите **Извлечь метаданные**
3. В диалоговом окне извлечения выберите, какие поля метаданных извлечь
4. Нажмите **Извлечь**, чтобы начать процесс извлечения
5. Отслеживайте прогресс в диалоговом окне
6. Нажмите **Готово**, когда закончите

### Поддерживаемые форматы метаданных

Приложение поддерживает извлечение метаданных из:

- **Файлы PNG**: Встроены в текстовые блоки
- **Файлы JPEG**: Встроены в поля EXIF, IPTC или XMP
- **Файлы WebP**: Встроены в секции метаданных
- **Файлы TIFF**: Встроены в теги TIFF

### Общие форматы метаданных

Приложение может извлечь метаданные из обычных инструментов генерации изображений с помощью ИИ:

- **Stable Diffusion**: Automatic1111 WebUI, InvokeAI, ComfyUI
- **MidJourney**: Прямые загрузки из MidJourney
- **DALL-E**: Прямые загрузки из DALL-E
- **Другие инструменты**: Любой инструмент, который встраивает метаданные в поддерживаемых форматах

## Экспорт метаданных

### Встраивание метаданных в изображения

Вы можете встроить метаданные обратно в файлы изображений:

#### Шаги для встраивания метаданных:
1. Выберите одно или несколько изображений
2. Щелкните правой кнопкой мыши и выберите **Встроить метаданные**
3. В диалоговом окне встраивания выберите, какие поля метаданных встроить
4. Выберите параметры встраивания:
   - **Перезаписывать существующие метаданные**: Заменить существующие метаданные в файлах
   - **Сохранять оригинальные файлы**: Создавать резервные копии перед встраиванием
5. Нажмите **Встроить**, чтобы начать процесс
6. Отслеживайте прогресс в диалоговом окне
7. Нажмите **Готово**, когда закончите

### Экспорт метаданных в файлы

Вы можете экспортировать метаданные в внешние файлы:

#### Шаги для экспорта метаданных:
1. Выберите одно или несколько изображений
2. Перейдите в `Файл > Экспорт > Экспортировать метаданные`
3. Выберите формат экспорта:
   - **JSON**: Структурированные метаданные в формате JSON
   - **CSV**: Значения, разделенные запятыми, для электронных таблиц
   - **TXT**: Простой текстовый формат
4. Выберите, какие поля метаданных экспортировать
5. Выберите целевую папку
6. Нажмите **Экспортировать**, чтобы сохранить файлы метаданных

### Импорт метаданных из файлов

Вы можете импортировать метаданные из внешних файлов:

#### Шаги для импорта метаданных:
1. Перейдите в `Файл > Импорт > Импортировать метаданные`
2. Выберите файл метаданных для импорта
3. Отобразите импортированные поля на поля метаданных приложения
4. Нажмите **Импортировать**, чтобы применить метаданные к соответствующим изображениям
5. Отслеживайте прогресс в диалоговом окне
6. Нажмите **Готово**, когда закончите

## Шаблоны метаданных

### Создание шаблонов метаданных

Вы можете создать шаблоны для часто используемых значений метаданных:

#### Шаги для создания шаблона:
1. Перейдите в `Инструменты > Шаблоны метаданных > Управление шаблонами`
2. Нажмите **Добавить шаблон**
3. Введите имя для шаблона
4. Заполните поля метаданных, которые вы хотите включить в шаблон
5. Нажмите **Сохранить**, чтобы создать шаблон

### Применение шаблонов

#### Применение шаблона к одному изображению:
1. Выберите изображение
2. Перейдите в `Инструменты > Шаблоны метаданных > [Название шаблона]`
3. Метаданные шаблона будут применены к изображению

#### Применение шаблона к нескольким изображениям:
1. Выберите несколько изображений
2. Щелкните правой кнопкой мыши и выберите **Применить шаблон метаданных**
3. Выберите шаблон из списка
4. Нажмите **Применить**, чтобы применить шаблон ко всем выбранным изображениям

### Редактирование шаблонов

1. Перейдите в `Инструменты > Шаблоны метаданных > Управление шаблонами`
2. Выберите шаблон, который вы хотите редактировать
3. Нажмите **Редактировать шаблон**
4. Измените поля шаблона
5. Нажмите **Сохранить**, чтобы обновить шаблон

### Удаление шаблонов

1. Перейдите в `Инструменты > Шаблоны метаданных > Управление шаблонами`
2. Выберите шаблон, который вы хотите удалить
3. Нажмите **Удалить шаблон**
4. Подтвердите удаление в диалоговом окне

## Лучшие практики для управления метаданными

1. **Извлекайте метаданные при импорте**: Всегда извлекайте метаданные при импорте новых изображений
2. **Храните метаданные обновленными**: Регулярно обновляйте метаданные для лучшей поискаемости
3. **Используйте описательные запросы**: Убедитесь, что запросы описательны и точны для лучшей организации
4. **Создавайте резервные копии метаданных**: Периодически экспортируйте метаданные в качестве резервной копии
5. **Используйте шаблоны**: Создавайте шаблоны для часто используемых значений метаданных
6. **Встраивайте метаданные перед обменом**: Всегда встраивайте метаданные перед обменом изображениями с другими
7. **Стандартизируйте значения**: Используйте последовательные значения для имен моделей, сэмплеров и т.д.
8. **Не перезаписывайте оригинальные файлы**: Всегда сохраняйте оригинальные файлы при встраивании метаданных

## Устранение проблем с метаданными

### Метаданные не извлекаются
- **Проверьте формат файла**: Убедитесь, что изображение находится в поддерживаемом формате (PNG, JPEG, WebP, TIFF)
- **Проверьте формат метаданных**: Убедитесь, что метаданные встроены в поддерживаемом формате
- **Поврежденные файлы**: Некоторые файлы могут иметь поврежденные метаданные - попробуйте перегенерировать изображение
- **Неподдерживаемый инструмент**: Инструмент, использованный для генерации изображения, может не встраивать метаданные в поддерживаемом формате

### Метаданные не сохраняются
- **Проверьте разрешения файлов**: Убедитесь, что у вас есть права на запись в файлы изображений
- **Только для чтения файлы**: Некоторые файлы могут быть доступны только для чтения - проверьте свойства файла
- **Файл заблокирован**: Файл может быть заблокирован другим приложением
- **Неподдерживаемый формат**: Некоторые форматы могут не поддерживать встраивание определенных полей метаданных

### Некорректные значения метаданных
- **Ручная коррекция**: Редактируйте неверные значения напрямую в панели деталей
- **Повторное извлечение**: Попробуйте повторно извлечь метаданные из изображения
- **Импорт корректных метаданных**: Импортируйте исправленные метаданные из файла

### Отсутствующие поля метаданных
- **Пользовательские поля**: Некоторые поля метаданных могут быть пользовательскими для конкретных инструментов - они могут не отображаться напрямую на полях приложения
- **Обновите приложение**: Убедитесь, что вы используете последнюю версию приложения, которая может поддерживать больше полей метаданных
- **Ручное отображение**: Используйте расширенный редактор метаданных для отображения пользовательских полей на полях приложения

## Далее

- Изучите [Поиск и фильтрация](./search-filtering.md), чтобы найти изображения с помощью метаданных
- Прочитайте о [Экспорте и совместном использовании](./export-sharing.md), чтобы поделиться изображениями с метаданными
- Узнайте о [Интеграции ИИ](../advanced-features/ai-integration.md) для получения дополнительных функций, основанных на ИИ